(this.webpackJsonpmesto=this.webpackJsonpmesto||[]).push([[0],[,,,,,function(e,t,a){e.exports=a.p+"static/media/not_found.908c20cb.svg"},,,,function(e,t,a){e.exports=a.p+"static/media/close_button.5df32a06.svg"},,,function(e,t,a){e.exports=a.p+"static/media/logo.c6f11019.svg"},function(e,t,a){e.exports=a.p+"static/media/delete_button.d8078343.svg"},function(e,t,a){e.exports=a.p+"static/media/pen.d476a8b8.svg"},function(e,t,a){e.exports=a.p+"static/media/edit__button.b05083e5.svg"},function(e,t,a){e.exports=a.p+"static/media/add__button.b2fce4ac.svg"},function(e,t,a){e.exports=a.p+"static/media/\u0433\u043e\u0440\u0430_\u044d\u043b\u044c\u0431\u0440\u0443\u0441.d6ed7639.jpg"},,function(e,t,a){e.exports=a(25)},,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),s=a.n(o),i=a(18),c=a(1),l=a(2),p=a(4),u=a(3),d=new(function(){function e(t){Object(c.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}return Object(l.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))}},{key:"_get",value:function(e){return fetch("".concat(this._baseUrl,"/").concat(e),{headers:{authorization:this._headers.authorization}}).then(this._getResponseData)}},{key:"getUserInfo",value:function(){return this._get("users/me")}},{key:"getInitialCards",value:function(){return this._get("cards")}},{key:"updateUserInfo",value:function(e,t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._getResponseData)}},{key:"addNewCard",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(this._getResponseData)}},{key:"_updateCardLike",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:t,headers:{authorization:this._headers.authorization}}).then(this._getResponseData)}},{key:"likeCard",value:function(e){return this._updateCardLike(e,"PUT")}},{key:"dislikeCard",value:function(e){return this._updateCardLike(e,"DELETE")}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._headers.authorization}}).then(this._getResponseData)}},{key:"updateUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._getResponseData)}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-12",headers:{authorization:"f4b731d6-2118-4fcc-9305-6dde1beafd26","Content-Type":"application/json"}}),m=a(12),h=a.n(m);var _=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("a",{href:"#"},r.a.createElement("img",{src:h.a,className:"header__logo",alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f Mesto"})))},f=a(13),b=a.n(f),v=a(5),E=a.n(v),C=r.a.createContext(),g=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onImageNotFound=function(e){e.target.onerror=null,e.target.src=E.a},n.onCardClick=function(){n.props.onCardClick(n.props.card)},n.handleLikeClick=function(){n.props.onCardLike(n.props.card)},n.handleDeleteClick=function(){n.props.onCardDelete(n.props.card)},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.card.owner._id===this.context._id,a=this.props.card.likes.find((function(t){return t._id===e.context._id}));return r.a.createElement("div",{className:"elements__item",key:this.props.card._id},r.a.createElement("img",{onError:this.onImageNotFound,onClick:this.onCardClick,className:"elements__item-picture",alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",src:this.props.card.link}),r.a.createElement("div",{className:"elements__item-info"},r.a.createElement("h2",{className:"elements__item-title"},this.props.card.name),r.a.createElement("div",{className:"elements__likes-container"},r.a.createElement("button",{"aria-label":"like",type:"button",onClick:this.handleLikeClick,className:"elements__heart-button  ".concat(a?"elements__heart-button_active":"","  ")}),r.a.createElement("p",{className:"elements__likes"},this.props.card.likes?this.props.card.likes.length:0))),r.a.createElement("button",{"aria-label":"delete",type:"button",onClick:this.handleDeleteClick,className:"elements__delete-button ".concat(t?"":"elements__delete-button_inactive")},r.a.createElement("img",{src:b.a,alt:"\u0417\u043d\u0430\u043a \u043a\u043e\u0440\u0437\u0438\u043d\u044b"})))}}]),a}(r.a.Component);g.contextType=C;var k=g,N=a(14),O=a.n(N),P=a(15),y=a.n(P),U=a(16),A=a.n(U),x=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onImageNotFound=function(e){e.target.onerror=null,e.target.src=E.a},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("main",{className:"content"},r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__info"},r.a.createElement("div",{className:"profile__avatar"},r.a.createElement("img",{src:O.a,className:"profile_active",alt:" \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0438"}),r.a.createElement("img",{src:this.context&&this.context.avatar,onError:this.onImageNotFound,onClick:this.props.onEditAvatar,className:"profile__image",alt:"\u0410\u0432\u0430\u0442\u0430\u0440"})),r.a.createElement("div",null,r.a.createElement("div",{className:"profile__name-container"},r.a.createElement("h1",{className:"profile__name"},this.context&&this.context.name),r.a.createElement("button",{"aria-label":"edit",type:"button",onClick:this.props.onEditProfile,className:"profile__edit-button"},r.a.createElement("img",{src:y.a,alt:"\u041a\u043d\u043e\u043f\u043a\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"}))),r.a.createElement("p",{className:"profile__profession"},this.context&&this.context.about))),r.a.createElement("button",{"aria-label":"add",type:"button",onClick:this.props.onAddPlace,className:"profile__add-button"},r.a.createElement("img",{src:A.a,className:"profile__add-button-image",alt:"\u041a\u043d\u043e\u043f\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f"}))),r.a.createElement("section",{className:"elements"},this.props.cards.map((function(t){return r.a.createElement(k,{card:t,currentUserId:e.context&&e.context._id,key:t._id,onCardClick:e.props.onCardClick,onCardLike:e.props.onCardLike,onCardDelete:e.props.onCardDelete})}))))}}]),a}(r.a.Component);x.contextType=C;var S=x;var j=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__info"},"\xa9 2020. Mesto Russia"))},D=a(9),L=a.n(D),I=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"popup popup_".concat(this.props.name," ").concat(this.props.isOpen?"popup_opened":"")},r.a.createElement("form",{name:"popup-".concat(this.props.name,"-form"),method:"get",action:"#",className:"popup__container form",noValidate:!0,onSubmit:this.props.onSubmit},r.a.createElement("h2",{className:"popup__title"},this.props.title),this.props.children,r.a.createElement("button",{type:"submit",className:"popup__button form__submit ".concat(this.props.isSubmitActive?"":"form__submit_inactive")},this.props.buttonName),r.a.createElement("button",{"aria-label":"close",type:"button",className:"popup__close-button",onClick:this.props.onClose},r.a.createElement("img",{src:L.a,alt:"\u041a\u043d\u043e\u043f\u043a\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close-button-image"}))))}}]),a}(r.a.Component),w=a(6);var T=function(e){var t=r.a.useContext(C),a=r.a.useState(""),n=Object(w.a)(a,2),o=n[0],s=n[1],i=r.a.useState(""),c=Object(w.a)(i,2),l=c[0],p=c[1];return r.a.useEffect((function(){s(t.name),p(t.about)}),[t]),r.a.createElement(I,{name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",buttonName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isSubmitActive:!0,isOpen:e.isOpen,onClose:function(){e.onClose(),s(t.name),p(t.about)},onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:o,about:l})}},r.a.createElement("input",{id:"name-input",type:"text",required:!0,minLength:"2",maxLength:"40",pattern:"[A-Za-z\u0410-\u042f\u0430-\u044f\u0401\u0451\\s\\-]+$",placeholder:"\u0418\u043c\u044f",className:"popup__text popup__text_type_name form__input",onChange:function(e){s(e.target.value)},value:o}),r.a.createElement("span",{id:"name-input-error",className:"form__input-error"}),r.a.createElement("input",{id:"profession-input",type:"text",required:!0,minLength:"2",maxLength:"200",pattern:"[A-Za-z\u0410-\u042f\u0430-\u044f\u0401\u0451\\s\\-,]+$",placeholder:"\u041e \u0441\u0435\u0431\u0435",className:"popup__text popup__text_type_profession form__input",onChange:function(e){p(e.target.value)},value:l}),r.a.createElement("span",{id:"profession-input-error",className:"form__input-error"}))};var z=function(e){var t=r.a.useRef();return r.a.createElement(I,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",buttonName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isSubmitActive:!0,isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(a){a.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})}},r.a.createElement("input",{id:"url-input",type:"url",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",className:"popup__text popup__text_type_link form__input",ref:t}),r.a.createElement("span",{id:"url-input-error",className:"form__input-error"}))};var R=function(e){var t=r.a.useState(""),a=Object(w.a)(t,2),n=a[0],o=a[1],s=r.a.useState(""),i=Object(w.a)(s,2),c=i[0],l=i[1];return r.a.createElement(I,{name:"card",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",buttonName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isSubmitActive:!0,isOpen:e.isOpen,onClose:function(){e.onClose(),o(""),l("")},onSubmit:function(t){t.preventDefault(),e.onUpdatePlace(n,c)}},r.a.createElement("input",{id:"picture-input",type:"text",required:!0,minLength:"1",maxLength:"30",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"popup__text popup__text_type_picture form__input",onChange:function(e){o(e.target.value)}}),r.a.createElement("span",{id:"picture-input-error",className:"form__input-error"}),r.a.createElement("input",{id:"url-input",type:"url",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup__text popup__text_type_link form__input",onChange:function(e){l(e.target.value)}}),r.a.createElement("span",{id:"url-input-error",className:"form__input-error"}))},F=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onImageNotFound=function(e){e.target.onerror=null,e.target.src=E.a},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"popup popup_picture ".concat(this.props.card?"popup_opened":"")},r.a.createElement("div",{className:"popup__container popup__container_picture"},r.a.createElement("img",{src:null!==this.props.card?this.props.card.link:"",onError:this.onImageNotFound,alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",className:"popup__image"}),r.a.createElement("h2",{className:"popup__title popup__title_picture"},null!==this.props.card?this.props.card.name:""),r.a.createElement("button",{"aria-label":"close",type:"button",className:"popup__close-button",onClick:this.props.onClose},r.a.createElement("img",{src:L.a,alt:"\u041a\u043d\u043e\u043f\u043a\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close-button-image"}))))}}]),a}(r.a.Component),q=a(17),J=a.n(q),M=(a(24),function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).handleCardLike=function(t){(t.likes.find((function(t){return t._id===e.state.currentUser._id}))?d.dislikeCard(t._id):d.likeCard(t._id)).then((function(a){var n=e.state.cards.map((function(e){return e._id===t._id?a:e}));e.setState({cards:n})}))},e.handleCardDelete=function(t){d.deleteCard(t._id).then((function(){var a=e.state.cards.filter((function(e){return e._id!==t._id}));e.setState({cards:a})})).catch((function(e){console.log(e)}))},e.handleAddPlaceSubmit=function(t,a){d.addNewCard(t,a).then((function(t){console.log(t),e.setState({cards:[].concat(Object(i.a)(e.state.cards),[t])})})).catch((function(e){console.log(e)})),e.closeAllPopups()},e.handleUpdateUser=function(t){var a=t.name,n=t.about;d.updateUserInfo(a,n).then((function(t){e.setState({currentUser:t})})).catch((function(t){e.setState({currentUser:e.createDefaultUser()}),console.log(t)})),e.closeAllPopups()},e.handleUpdateAvatar=function(t){var a=t.avatar;d.updateUserAvatar(a).then((function(t){e.setState({currentUser:t})})).catch((function(t){e.setState({currentUser:e.createDefaultUser()}),console.log(t)})),e.closeAllPopups()},e.handleEditAvatarClick=function(){e.setState({isEditAvatarPopupOpen:!0})},e.handleEditProfileClick=function(){e.setState({isEditProfilePopupOpen:!0})},e.handleAddPlaceClick=function(){e.setState({isAddPlacePopupOpen:!0})},e.handleAddPlaceClick=function(){e.setState({isAddPlacePopupOpen:!0})},e.handleCardClick=function(t){e.setState({selectedCard:t})},e.closeAllPopups=function(){e.setState({isEditProfilePopupOpen:!1,isAddPlacePopupOpen:!1,isEditAvatarPopupOpen:!1,selectedCard:null})},e.createDefaultUser=function(){return{_id:-1,name:"No name",about:"No description",avatar:J.a}},e.state={isEditProfilePopupOpen:!1,isAddPlacePopupOpen:!1,isEditAvatarPopupOpen:!1,selectedCard:null,currentUser:e.createDefaultUser(),cards:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;d.getInitialCards().then((function(t){e.setState({cards:t})})).catch((function(e){console.log(e)})),d.getUserInfo().then((function(t){e.setState({currentUser:t})})).catch((function(t){e.setState({currentUser:e.createDefaultUser()}),console.log(t)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"page"},r.a.createElement(_,null),r.a.createElement(C.Provider,{value:this.state.currentUser},r.a.createElement(S,{onEditAvatar:this.handleEditAvatarClick,onEditProfile:this.handleEditProfileClick,onAddPlace:this.handleAddPlaceClick,onCardClick:this.handleCardClick,cards:this.state.cards,onCardLike:this.handleCardLike,onCardDelete:this.handleCardDelete}),r.a.createElement(F,{card:this.state.selectedCard,onClose:this.closeAllPopups}),r.a.createElement(T,{onUpdateUser:this.handleUpdateUser,isOpen:this.state.isEditProfilePopupOpen,onClose:this.closeAllPopups}),r.a.createElement(R,{onUpdatePlace:this.handleAddPlaceSubmit,isOpen:this.state.isAddPlacePopupOpen,onClose:this.closeAllPopups}),r.a.createElement(I,{name:"check",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonName:"\u0414\u0430",isSubmitActive:!0,isOpen:!1,onClose:this.closeAllPopups}),r.a.createElement(z,{onUpdateAvatar:this.handleUpdateAvatar,isOpen:this.state.isEditAvatarPopupOpen,onClose:this.closeAllPopups})),r.a.createElement(j,null))}}]),a}(r.a.Component));M.contextType=C;var $=M;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[19,1,2]]]);
//# sourceMappingURL=main.aa23b817.chunk.js.map